<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Admin Dashboard</title>
<link rel="stylesheet" href="/static/css/styles.css"></head>
<body>
  <h1>Admin Dashboard</h1>
  <section>
    <h2>Teams</h2>
    <div id="teamsList"></div>
  </section>
  <section>
    <h2>Bookings</h2>
    <div id="bookingsList"></div>
  </section>
   <!-- Define backend API URL -->
  <script>
    const backendUrl = "http://192.168.1.102:5000"; // set this to PC2 IP
  </script>
  <script>
    async function loadAdmin() {
      const teams = await (await fetch('/api/teams')).json();
      const bookings = await (await fetch('/api/bookings')).json();
      const tdiv = document.getElementById('teamsList');
      tdiv.innerHTML = teams.map(t => `
        <div>
          <strong>${t.team_name}</strong> (${t.category}) - ${t.status}
          <div>Leader: ${t.leader_name} (${t.leader_email})</div>
          <div>Members: ${t.members}</div>
          <button onclick="approve(${t.id})">Approve</button>
        </div>
      `).join('<hr>');
      document.getElementById('bookingsList').innerText = JSON.stringify(bookings, null, 2);
    }
    async function approve(id){
      await fetch(`/api/teams/${id}/approve`, {method:'POST'});
      loadAdmin();
    }
    loadAdmin();
  </script>
</body>
</html>
